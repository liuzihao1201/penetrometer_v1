# 电机控制和贯入仪应用程序

## 项目描述

该项目包括一个电机控制系统和一个贯入仪应用程序。电机控制系统负责管理电机操作，如设置速度、停止和位置控制。贯入仪应用程序提供了一个图形用户界面（GUI），用于与电机和其他连接设备（如接近开关和传感器）进行交互。

## 文件结构

- `cut_motor_control/communication.py`：使用Modbus协议处理与电机的通信。
- `cut_motor_control/controller.py`：提供控制电机的方法，包括设置速度、停止和位置控制。
- `penetrometer_v1_1.py`：主应用程序文件，设置GUI并连接电机和其他设备。
- `penetration_motor_control/communication.py`：处理贯入电机的通信。
- `penetration_motor_control/controller.py`：提供贯入电机的控制方法。
- `proximity_switch/communication.py`：处理接近开关的通信。
- `proximity_switch/control.py`：提供接近开关的控制方法。

## 设置说明

1. **安装依赖**：确保已安装Python及必要的包。可以使用pip安装所需的包：
   ```bash
   pip install minimalmodbus PySide6 pyserial
   ```

2. **连接硬件**：使用适当的串口将电机、接近开关和传感器连接到计算机。

3. **配置串口**：确保串口配置正确，并可供应用程序使用。

## 使用方法

1. **运行应用程序**：通过运行`penetrometer_v1_1.py`文件启动应用程序：
   ```bash
   python penetrometer_v1_1.py
   ```

2. **使用GUI**：
   - **打开连接**：使用GUI打开与电机、接近开关和传感器的连接。
   - **控制电机**：设置电机顺时针或逆时针旋转到指定距离或持续旋转。
   - **控制贯入电机**：设置贯入电机上升或下降到指定距离，或持续旋转。
   - **监控接近开关**：获取和监控接近开关的状态。
   - **停止电机**：使用停止按钮停止电机。
   - **获取编码器数据**：开始和停止获取编码器数据以监控电机性能。

3. **多线程处理**：为了避免UI卡死，贯入电机的操作被放在单独的线程中执行。这确保了UI的响应性。

4. **关闭连接**：在退出应用程序之前确保所有连接已关闭，以防止通信问题。

## 故障排除

- **连接问题**：如果遇到连接电机或其他设备的问题，请确保选择了正确的串口，并且设备已通电。
- **无效输入**：确保速度和距离的所有输入值都在应用程序指定的有效范围内。

## 贡献

如果您希望为本项目做出贡献，请fork此仓库并提交pull request。

## 许可证

本项目采用MIT许可证。有关详细信息，请参阅LICENSE文件。

## 联系方式

如有任何问题或疑问，请联系[您的姓名]，邮箱：[您的邮箱]。
